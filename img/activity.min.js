///<jscompress sourcefile="anniversary.js" />
/*周年庆的入口函数*/function anniversary_entry(){winnerRolls();turntable();load_myWinList()}function load_myWinList(){$(".anniversary .my_win_list").hide();$(".anniversary .winning-record-default").hide();ajaxPost("post","find_by_user_winners","",function(c){if(1==c.errorCode)if("undefined"!=typeof c.data&&0<c.data.length){var a="";activity_one_anniversary_lottery.myWinnerList=c.data;var b=c.data.length,b=0!=b%2?parseInt(b/2)+1:parseInt(b/2);activity_one_anniversary_lottery.myWinnerList_count=b;for(b=0;b<c.data.length;b++){0==b%2&&(a+="\x3cli\x3e");a+='\x3cdiv class\x3d"img-box"\x3e\x3cimg src\x3d"zpgSource/images/computer/activity/';switch(c.data[b].someType){case 1:a+="jpa";break;case 2:a+="jpb";break;case 3:a+="jpc";break;case 4:a+="jp15";break;case 5:a+="jp10";break;case 6:a+="jp5";break;default:a+="jp5"}a+='.png" alt\x3d""title\x3d""\x3e\x3c/div\x3e';0!=b%2&&(a+="\x3c/li\x3e")}0==c.data.length%2&&(a+="\x3c/li\x3e");$(".anniversary .winning-record-default").hide();$(".anniversary .my_win_list").show();$(".anniversary .my_win_list .winning-record-list").html(a);1<activity_one_anniversary_lottery.myWinnerList_count?($(".anniversary .winning-record-page").show(),$(".anniversary .my_win_list .page_count").html('\x3cem  class\x3d"currPage"\x3e1\x3c/em\x3e/\x3cem  class\x3d"allPage"\x3e'+activity_one_anniversary_lottery.myWinnerList_count+"\x3c/em\x3e")):$(".anniversary .winning-record-page").hide();myWinList_view_wining($("#winning_record_list"))}else activity_one_anniversary_lottery.myWinnerList=null,activity_one_anniversary_lottery.myWinnerList_count=0,$(".anniversary .my_win_list").hide(),$(".anniversary .winning-record-default").show(),$(".anniversary .my_win_list .page_count").html("");else activity_one_anniversary_lottery.myWinnerList=null,activity_one_anniversary_lottery.myWinnerList_count=0,$(".anniversary .my_win_list").hide(),$(".anniversary .winning-record-default").show(),$(".anniversary .my_win_list .page_count").html(""),toast(c.meesage,2)},function(){activity_one_anniversary_lottery.myWinnerList=null;activity_one_anniversary_lottery.myWinnerList_count=0;$(".anniversary .my_win_list").hide();$(".anniversary .winning-record-default").show();$(".anniversary .my_win_list .page_count").html("")})}function winnerRolls(){setInterval(function(){$(".lamp-box").hasClass("active")?$(".lamp-box").removeClass("active"):$(".lamp-box").addClass("active")},400);userInfoData.intervalTimeListener=setInterval(function(){scrollNews($(".anniversary .dd-box"))},800);customMouseOnListener($(".anniversary .dd-box"),function(c){c.find(".dd-box-main:first").stop();clearInterval(userInfoData.intervalTimeListener);userInfoData.intervalTimeListener=null},function(c){scrollNews(c);userInfoData.intervalTimeListener=setInterval(function(){scrollNews(c)},800)});load_winnerRolls_list()}function load_winnerRolls_list(){ajaxPost("post","find_user_winners_all","pageSize\x3d0\x26pageNo\x3d20",function(c){if(1==c.errorCode)if("undefined"!=typeof c.data&&0<c.data.length){for(var a="",b=null,d=0;d<c.data.length;d++){b=c.data[d];a+="\x3cdd\x3e\x3cspan\x3e";a+=b.companyName;a+="\x3c/span\x3e\x3cspan\x3e"+b.userNo+"\x3c/span\x3e\x3cspan\x3e";switch(b.someType){case 1:a+="599\u5143\u5957\u9910";break;case 2:a+="299\u5143\u5957\u9910";break;case 3:a+="99\u5143\u5957\u9910";break;case 4:a+="\u53ef\u514d\u8d39\u89e3\u950115\u4efd\u7b80\u5386";break;case 5:a+="\u53ef\u514d\u8d39\u89e3\u950110\u4efd\u7b80\u5386";break;case 6:a+="\u53ef\u514d\u8d39\u89e3\u95015\u4efd\u7b80\u5386"}a+="\x3c/span\x3e\x3c/dd\x3e"}$(".anniversary .dd-box-main").html(a);$(".anniversary .dd-box").show();$(".anniversary .anniversary-center-default").hide()}else $(".anniversary .dd-box").hide(),$(".anniversary .anniversary-center-default").show();else toast(c.meesage,2),$(".anniversary .dd-box").hide(),$(".anniversary .anniversary-center-default").show()},function(){$(".anniversary .dd-box").hide();$(".anniversary .anniversary-center-default").show()})}function scrollNews(c){var a=c.find(".dd-box-main:first");a.find("dd:first").height();a.animate({"margin-top":"-28px"},800,function(){a.css({"margin-top":"0px"}).find("dd:first").appendTo(a)})}function turntable(){null!=userInfoData&&null!=userInfoData.userLottery&&0<userInfoData.userLottery.lottery_number?$(".frequency").html(userInfoData.userLottery.lottery_number):($(".frequency").html(0),$(".anniversary .pointer img").attr("src","zpgSource/images/computer/activity/start_gray.png"));var c=!0,a=function(a,b,e){$("#rotate").stopRotate();a=parseInt(b+1080)/.3;a=parseInt(a);$("#rotate").rotate({angle:0,animateTo:b+1080,duration:a,callback:function(){c=!0;e&&e()}})},b=function(b){switch(b){case 1:a(1,360,function(){annniversary_lottery_popup(1,b)});break;case 2:a(2,240,function(){annniversary_lottery_popup(1,b)});break;case 3:a(3,120,function(){annniversary_lottery_popup(1,b)});break;case 4:a(4,300,function(){annniversary_lottery_popup(1,b)});break;case 5:a(5,180,function(){annniversary_lottery_popup(1,b)});break;case 6:a(6,60,function(){annniversary_lottery_popup(1,b)});break;default:c=!0,$("#rotate").stopRotate()}};customClickOnListener($(".anniversary .pointer"),function(a){isRegisterZhaopingou(function(){if(1!=userInfoData.userInfo.is_verification_email&&1!=userInfoData.userInfo.is_verification_mobile)toast("\u8bf7\u60a8\u524d\u5f80\u60a8\u7684\u90ae\u7bb1\u9a8c\u8bc1\u5e10\u53f7\u540e\u53ef\u53c2\u4e0e\u6d3b\u52a8",2);else if(1!=userInfoData.is_user_transition&&1!=userInfoData.userInfo.is_company)3==userInfoData.userInfo.is_company?toast("\u60a8\u7684\u516c\u53f8\u4fe1\u606f\u6b63\u5728\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u6210\u529f\u53ef\u53c2\u4e0e\u6d3b\u52a8",2):annniversary_lottery_popup(4);else if(null!=userInfoData.userLottery){if(c)if(c=!1,$(".frequency").html(userInfoData.userLottery.lottery_number),0<userInfoData.userLottery.lottery_number){$(".frequency").html(userInfoData.userLottery.lottery_number);$("#rotate").stopRotate();var a=$("#rotate").getRotateAngle()[0];isNaN(a)&&(a=0);var a=parseInt(a)+14400,d;d=parseInt(32E3);$("#rotate").rotate({angle:0,animateTo:a,duration:d});ajaxPost("post","chou_already_some","",function(a){1==a.errorCode?(b(a.someType),userInfoData.userLottery.lottery_number=a.lotteryNumber,$(".frequency").html(userInfoData.userLottery.lottery_number)):(c=!0,toast(a.message,2),$("#rotate").stopRotate(),$(".anniversary .pointer img").attr("src","zpgSource/images/computer/activity/start_gray.png"))},function(){c=!0;$("#rotate").stopRotate()})}else c=!0,$(".frequency").html(0),annniversary_lottery_popup(2)}else $(".frequency").html(0),annniversary_lottery_popup(2)},function(){annniversary_lottery_popup(3)})})}function annniversary_lottery_popup(c,a){var b='\x3cdiv class\x3d"markbg80 annniversary-popup-box"\x3e';if(1==c){b+='\x3cdiv class\x3d"annniversary-popup annniversary-popupb"\x3e\x3ca class\x3d"close-box"href\x3d"javascript:void(0);"\x3e\x3cimg src\x3d"zpgSource/images/computer/activity/close.png"alt\x3d""title\x3d""\x3e\x3c/a\x3e\x3ca class\x3d"ok-btn"href\x3d"javascript:void(0);"\x3e\x3cimg src\x3d"zpgSource/images/computer/activity/ok_btn.png"alt\x3d""title\x3d""\x3e\x3c/a\x3e\x3cp class\x3d"hint-text';switch(a){case 1:b+=' hint-text-big"\x3e599\u5143\u5957\u9910';break;case 2:b+=' hint-text-big"\x3e299\u5143\u5957\u9910';break;case 3:b+=' hint-text-big"\x3e99\u5143\u5957\u9910';break;case 4:b+='"\x3e\u514d\u8d39\u89e3\u950115\u4efd\u7b80\u5386';break;case 5:b+='"\x3e\u514d\u8d39\u89e3\u950110\u4efd\u7b80\u5386';break;case 6:b+='"\x3e\u514d\u8d39\u89e3\u95015\u4efd\u7b80\u5386';break;default:b+='"\x3e'}b+="\x3c/p\x3e\x3c/div\x3e"}else 2==c?b+='\x3cdiv class\x3d"no_change"\x3e\x3ca class\x3d"close-box"href\x3d"javascript:void(0);" \x3e\x3cimg src\x3d"zpgSource/images/computer/activity/close.png"alt\x3d""title\x3d""\x3e\x3c/a\x3e\x3ca class\x3d"ok-btn"href\x3d"vip" target\x3d"_blank"\x3e\x3cimg src\x3d"zpgSource/images/computer/activity/no_change.png"alt\x3d""title\x3d""\x3e\x3c/a\x3e\x3c/div\x3e':3==c?b+='\x3cdiv class\x3d"no_login"\x3e\x3cdiv class\x3d"no_login_btn"\x3e\x3ca class\x3d"close-box bx4 le"href\x3d"javascript:void(0);"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca class\x3d"no_change_login bx4 rg"href\x3d"javascript:void(0);"\x3e\u767b\u5f55\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':4==c&&(b+='\x3cdiv class\x3d"no_authentication"\x3e\x3cdiv class\x3d"no_authentication_btn"\x3e\x3ca class\x3d"close-box bx4 le"href\x3d"javascript:void(0);"\x3e\u53d6\u6d88\x3c/a\x3e\x3ca class\x3d"go_authentication_btn bx4 rg"href\x3d"javascript:void(0);"\x3e\u53bb\u8ba4\u8bc1\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');b+="\x3c/div\x3e";0==$("#popup").length&&$("body").append('\x3cdiv id\x3d"popup"\x3e\x3c/div\x3e');$("#popup").html(b);$("html,body").css({overflow:"hidden"});1==c&&(load_myWinList(),load_winnerRolls_list());customClickOnListener($(".ok-btn,.close-box"),function(a){a.closest(".annniversary-popup-box").hide();$("html,body").css({overflow:"auto"})});customClickOnListener($(".no_login .no_change_login"),function(a){a.closest(".annniversary-popup-box").hide();$("html,body").css({overflow:"auto"});startLoginOrRegisterPage(!0,!1)});customClickOnListener($(".no_authentication .go_authentication_btn"),function(a){a.closest(".annniversary-popup-box").hide();$("html,body").css({overflow:"auto"});"\u53bb\u8ba4\u8bc1"==a.text()&&user_identity_testing_dialog(function(a){})})}function loading_share_anniversary(){customClickOnListener($(".anniver_share_login"),function(c){startLoginOrRegisterPage(!0,!1)});share_user_list()}function loading_share_anniversary_cz(){$(".copy_user_link").each(function(){var c=new ZeroClipboard($(this),{moviePath:"/zhaopingou_client/zpgSource/js/computer/yuan/commPc/ZeroClipboard.swf"});c.on("load",function(a){});c.on("complete",function(a,b){$("#share_intxt_copy").select();toast("\u94fe\u63a5\u590d\u5236\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u5206\u4eab\u7ed9\u597d\u53cb\u5566",1)});c.on("aftercopy",function(a){})})}function share_weixin_show(c,a){var b='\x3cdiv class\x3d"share-wx"\x3e\x3cdiv class\x3d"share-wx-form bx4 ';1!=c&&(b+=" desable");b+='"\x3e\x3cspan\x3e\u5fae\u4fe1\u53f7\x3c/span\x3e\x3cinput id\x3d"share_weixin_id" type\x3d"text" placeholder\x3d"';1==c||2==c?b+="\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7\uff0c\u73b0\u91d1\u7ea2\u5305\u5949\u4e0a":3==c?b+="\u5151\u6362\u7533\u8bf7\u5df2\u63d0\u4ea4\uff0c\u7ea2\u5305\u4e00\u4f1a\u513f\u5c31\u5230~":4==c&&(b+="\u60a8\u5df2\u7ecf\u5151\u6362\u8fc7\u4e86\u54e6\uff01");b+='" value\x3d"" class\x3d"in-txt"\x3e\x3c/div\x3e\x3cdiv id\x3d"share_wx_btn" class\x3d"btn0 ';if(2==c||3==c||4==c)b+="desable";b+='"\x3e\u7acb\u5373\u5151\u6362\x3c/div\x3e\x3c/div\x3e\x3cp\x3e';1==c?b+="* \u606d\u559c\uff01\u60a8\u5df2\u7ecf\u6210\u529f\u9080\u8bf7\u4e8610\u4f4d\u670b\u53cb\u6ce8\u518c\u9a8c\u8bc1\u6210\u529f\uff0c\u7acb\u5373\u8f93\u5165\u5fae\u4fe1\u53f7\uff0c\u5151\u6362\u73b0\u91d1\u7ea2\u5305\u5427\u3002\u5151\u6362\u65e5\u671f\u622a\u6b62\u81f37\u670831\u65e5":2==c?b+="* \u8fd8\u5dee"+a+"\u4e2a\u4eba\u5c31\u53ef\u4ee5\u83b7\u5f9750\u5143\u73b0\u91d1\u7ea2\u5305\u4e86\uff0c\u7ee7\u7eed\u52a0\u6cb9\u5427~":3==c?b+="* \u7ea2\u5305\u8fd8\u6ca1\u5230\u8d26\uff1f\u83ab\u614c\uff01\u72d7\u72d7\u6b63\u5e26\u7740\u5fae\u4fe1\u7ea2\u5305\u594b\u529b\u5954\u5411\u4f60\uff0c48\u5c0f\u65f6\u5185\u51c6\u65f6\u9001\u8fbe~":4==c&&(b+="* \u73b0\u91d1\u7ea2\u5305\u5df2\u5151\u6362\u6210\u529f\uff0c\u7ee7\u7eed\u5206\u4eab\uff0c\u83b7\u53d6\u65e0\u9650\u989d\u7684\u7b80\u5386\u989d\u5ea6\u5427");b+="\x3c/p\x3e";$(".share-weixin").html(b);customClickOnListener($("#share_wx_btn"),function(a){a.hasClass("desable")?toast("\u60a8\u8fd8\u4e0d\u80fd\u83b7\u53d6\u5956\u52b1\u54e6",2):(a=trim($("#share_weixin_id").val()),0==a.length?toast("\u8bf7\u8f93\u5165\u5fae\u4fe1\u8d26\u6237",2):ajaxPost("post","add_wechatId_choujiang","weChatId\x3d"+a,function(a){1==a.errorCode?(toast("\u72d7\u72d7\u4f1a\u572848\u5c0f\u65f6\u5185\u6838\u5b9e\u4fe1\u606f\u5e76\u901a\u8fc7\u5fae\u4fe1\u9001\u4e0a\u73b0\u91d1\u7ea2\u5305",1),share_weixin_show(3)):toast(a.message,2)}))})}function share_user_list(){$(".share-default").hide();isRegisterZhaopingou(function(){$(".share-main .anniver_share_login").hide();$(".share-main .share-user").show();ajaxPost("post","find_user_member_info","",function(c){1==c.errorCode&&(vipData.myInvitationCode=c.invitationCode,c=ajaxData.second_servierUrl+"?invitation_code\x3d"+c.invitationCode,$(".share-main .share-form").html('\x3cdiv class\x3d"share-link bx4"\x3e\x3cinput type\x3d"text"id\x3d"share_intxt_copy"value\x3d"'+c+'"class\x3d"in-txt"readOnly\x3e\x3c/div\x3e\x3cdiv class\x3d"btn0 copy_user_link" data-clipboard-text\x3d"'+c+'" data-clipboard-target\x3d"'+c+'"\x3e\u590d\u5236\u60a8\u7684\u4e13\u5c5e\u94fe\u63a5\x3c/div\x3e'),loading_share_anniversary_cz())});ajaxPost("post","find_user_sequence_all","pageSize\x3d0\x26pageNo\x3d10000",function(c){if(1==c.errorCode)if(0==c.isPrize?10>c.userSequenceNumber?share_weixin_show(2,10-c.userSequenceNumber):share_weixin_show(1):1==c.isPrize?share_weixin_show(3):share_weixin_show(4),"undefined"!=typeof c.listUserSequenceDatas&&0<c.listUserSequenceDatas.length){for(var a="",b=null,d=0;d<c.listUserSequenceDatas.length;d++){b=c.listUserSequenceDatas[d];a+='\x3cli\x3e\x3cdiv class\x3d"share-wh01"\x3e'+(d+1)+'\x3c/div\x3e\x3cdiv class\x3d"share-wh02"\x3e'+b.userName+'\x3c/div\x3e\x3cdiv class\x3d"share-wh02"\x3e'+b.registerTime+'\x3c/div\x3e\x3cdiv class\x3d"share-wh03"\x3e';switch(b.isVerification){case 0:a+="\u672a\u9a8c\u8bc1";break;case 1:a+="\u5df2\u9a8c\u8bc1\uff08\u6709\u6548\uff09";break;case 2:a+="\u9a8c\u8bc1\u672a\u901a\u8fc7";break;case 3:a+="\u7b49\u5f85\u9a8c\u8bc1"}a+="\x3c/div\x3e\x3c/li\x3e"}$(".share-main .share-default").hide();$(".share-main .share-register #share_register_ul").html(a)}else $(".share-main .share-default").show();else toast(c.meesage,2),$(".share-main .share-default").show()},function(){$(".share-main .share-default").show()})},function(){$(".share-main .anniver_share_login").show();$(".share-main .share-user").hide()})}function myWinList_view_wining(c){c.css("width",315*activity_one_anniversary_lottery.myWinnerList_count+"px");resumeHouseData.pageSize=1;customClickOnListener($(".anniversary .arrt_left_white"),function(a){1<resumeHouseData.pageSize&&(c.animate({left:315*-(resumeHouseData.pageSize-2)},300),--resumeHouseData.pageSize,$(".anniversary .currPage").text(resumeHouseData.pageSize))});customClickOnListener($(".anniversary .arrt_right_white"),function(a){resumeHouseData.pageSize<activity_one_anniversary_lottery.myWinnerList_count&&(c.animate({left:315*-resumeHouseData.pageSize},300),resumeHouseData.pageSize+=1,$(".anniversary .currPage").text(resumeHouseData.pageSize))})}(function(c){for(var a,b=document.getElementsByTagName("head")[0].style,d=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<d.length;g++)void 0!==b[d[g]]&&(a=d[g]);var e=eval('"v"\x3d\x3d"\v"');jQuery.fn.extend({rotate:function(a){if(0!==this.length&&"undefined"!=typeof a){"number"==typeof a&&(a={angle:a});for(var b=[],h=0,d=this.length;h<d;h++){var f=this.get(h);if(f.Wilq32&&f.Wilq32.PhotoEffect)f.Wilq32.PhotoEffect._handleRotation(a);else{var e=c.extend(!0,{},a),f=(new Wilq32.PhotoEffect(f,e))._rootObj;b.push(c(f))}}return b}},getRotateAngle:function(){for(var a=[],b=0,c=this.length;b<c;b++){var d=this.get(b);d.Wilq32&&d.Wilq32.PhotoEffect&&(a[b]=d.Wilq32.PhotoEffect._angle)}return a},stopRotate:function(){for(var a=0,b=this.length;a<b;a++){var c=this.get(a);c.Wilq32&&c.Wilq32.PhotoEffect&&clearTimeout(c.Wilq32.PhotoEffect._timer)}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=function(){return a?function(a,b){a.Wilq32={PhotoEffect:this};this._img=this._rootObj=this._eventObj=a;this._handleRotation(b)}:function(a,b){this._img=a;this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};a.parentNode.insertBefore(this._rootObj,a);if(a.complete)this._Loader(b);else{var c=this;jQuery(this._img).bind("load",function(){c._Loader(b)})}}}();Wilq32.PhotoEffect.prototype={_setupParameters:function(a){this._parameters=this._parameters||{};"number"!==typeof this._angle&&(this._angle=0);"number"===typeof a.angle&&(this._angle=a.angle);this._parameters.animateTo="number"===typeof a.animateTo?a.animateTo:this._angle;this._parameters.step=a.step||this._parameters.step||null;this._parameters.easing=a.easing||this._parameters.easing||function(a,b,c,d,k){return-d*((b=b/k-1)*b*b*b-1)+c};this._parameters.duration=a.duration||this._parameters.duration||1E3;this._parameters.callback=a.callback||this._parameters.callback||function(){};a.bind&&a.bind!=this._parameters.bind&&this._BindEvents(a.bind)},_handleRotation:function(a){this._setupParameters(a);this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(a){if(a&&this._eventObj){if(this._parameters.bind){var b=this._parameters.bind,c;for(c in b)b.hasOwnProperty(c)&&jQuery(this._eventObj).unbind(c,b[c])}this._parameters.bind=a;for(c in a)a.hasOwnProperty(c)&&jQuery(this._eventObj).bind(c,a[c])}},_Loader:function(){return e?function(a){var b=this._img.width,c=this._img.height;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");this._vimage.src=this._img.src;this._vimage.style.height=c+"px";this._vimage.style.width=b+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._container=this.createVMLNode("group");this._container.style.width=b;this._container.style.height=c;this._container.style.position="absolute";this._container.setAttribute("coordsize",b-1+","+(c-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position="relative";this._rootObj.style.width=b+"px";this._rootObj.style.height=c+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._eventObj=this._rootObj;this._handleRotation(a)}:function(a){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._width=this._img.width;this._height=this._img.height;this._widthHalf=this._width/2;this._heightHalf=this._height/2;var b=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=b-this._width;this._heightAdd=b-this._height;this._widthAddHalf=this._widthAdd/2;this._heightAddHalf=this._heightAdd/2;this._img.parentNode.removeChild(this._img);this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width;this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height;this._canvas=document.createElement("canvas");this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";this._canvas.style.left=-this._widthAddHalf+"px";this._canvas.style.top=-this._heightAddHalf+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._width+"px";this._rootObj.style.height=this._height+"px";this._eventObj=this._canvas;this._cnv=this._canvas.getContext("2d");this._handleRotation(a)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer);this._animateStartTime=+new Date;this._animateStartAngle=this._angle;this._animate()},_animate:function(){var a=+new Date,b=a-this._animateStartTime>this._parameters.duration;if(b&&!this._parameters.animatedGif)clearTimeout(this._timer);else{if(this._canvas||this._vimage||this._img)a=this._parameters.easing(0,a-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*a)/10);this._parameters.step&&this._parameters.step(this._angle);var c=this;this._timer=setTimeout(function(){c._animate.call(c)},10)}this._parameters.callback&&b&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var b=Math.PI/180;return e?function(a){this._angle=a;this._container.style.rotation=a%360+"deg"}:a?function(b){this._angle=b;this._img.style[a]="rotate("+b%360+"deg)"}:function(a){this._angle=a;a=a%360*b;this._canvas.width=this._width+this._widthAdd;this._canvas.height=this._height+this._heightAdd;this._cnv.translate(this._widthAddHalf,this._heightAddHalf);this._cnv.translate(this._widthHalf,this._heightHalf);this._cnv.rotate(a);this._cnv.translate(-this._widthHalf,-this._heightHalf);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0)}}()};e&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("\x3crvml:"+a+' class\x3d"rvml"\x3e')}}catch(a){return function(a){return document.createElement("\x3c"+a+' xmlns\x3d"urn:schemas-microsoft.com:vml" class\x3d"rvml"\x3e')}}}())})(jQuery);